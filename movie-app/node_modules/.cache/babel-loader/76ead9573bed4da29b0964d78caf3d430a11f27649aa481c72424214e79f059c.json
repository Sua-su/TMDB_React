{"ast":null,"code":"var _jsxFileName = \"/Users/su/Documents/TMDB_project/movie-app/src/components/Pages/CartPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport CartList from '../cart/CartList';\nimport CartFooter from '../cart/CartFooter';\nimport '../../css/CartPage.css';\nimport LoadingSpinner from '../home/LoadingSpinner';\nimport { CartContext } from '../context/CartContext';\nimport * as useFetchCart from \"../cart/useFetchCart\";\n\n/**\n * Component for the cart page.\n * @returns {JSX.Element} - CartPage component.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction CartPage() {\n  _s();\n  const {\n    cartContents,\n    fetchCartContents\n  } = useContext(CartContext);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const MESSAGES = {\n    ERROR_EMPTYING_CART: 'Failed to clean the items from cart. Please try again later.',\n    CART_IS_EMPTY: 'Your cart is empty.'\n  };\n  useEffect(() => {\n    const totalCost = calculateTotal(cartContents);\n    setTotal(totalCost);\n  }, [cartContents]);\n\n  /**\n   * Calculates the total price of the cart items.\n   * @param {Array} items - The cart items.\n   * @returns {number} - The total price.\n   */\n  const calculateTotal = items => {\n    return items.reduce((total, item) => total + item.price, 0);\n  };\n\n  /**\n   * Empties the cart.\n   */\n  const emptyCart = async () => {\n    setLoading(true);\n    try {\n      await useFetchCart.emptyCart();\n      //update cart context\n      fetchCartContents();\n      setTotal(0);\n    } catch (error) {\n      setError(MESSAGES.ERROR_EMPTYING_CART);\n    } finally {\n      setLoading(false);\n    }\n  };\n  /**\n   * Renders the content based on the cart state.\n   * @returns {JSX.Element} - The rendered content.\n   */\n  const renderContent = () => {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 20\n      }, this);\n    }\n    if (!cartContents || cartContents.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-center  p-2\",\n        children: MESSAGES.CART_IS_EMPTY\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 20\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(CartList, {\n        cartItems: cartContents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row p-2 m-2\",\n        children: [/*#__PURE__*/_jsxDEV(CartFooter, {\n          total: total,\n          onEmptyCart: emptyCart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-danger p-2\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), renderContent()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n}\n_s(CartPage, \"1VKssBmfNdCurtcPsK0mu/IUgjs=\");\n_c = CartPage;\nexport default CartPage;\nvar _c;\n$RefreshReg$(_c, \"CartPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","CartList","CartFooter","LoadingSpinner","CartContext","useFetchCart","jsxDEV","_jsxDEV","Fragment","_Fragment","CartPage","_s","cartContents","fetchCartContents","total","setTotal","loading","setLoading","error","setError","MESSAGES","ERROR_EMPTYING_CART","CART_IS_EMPTY","totalCost","calculateTotal","items","reduce","item","price","emptyCart","renderContent","fileName","_jsxFileName","lineNumber","columnNumber","length","className","children","cartItems","onEmptyCart","_c","$RefreshReg$"],"sources":["/Users/su/Documents/TMDB_project/movie-app/src/components/Pages/CartPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport CartList from '../cart/CartList';\nimport CartFooter from '../cart/CartFooter';\nimport '../../css/CartPage.css';\nimport LoadingSpinner from '../home/LoadingSpinner';\nimport { CartContext } from '../context/CartContext';\nimport * as useFetchCart from \"../cart/useFetchCart\";\n\n/**\n * Component for the cart page.\n * @returns {JSX.Element} - CartPage component.\n */\nfunction CartPage() {\n    const { cartContents, fetchCartContents } = useContext(CartContext);\n    const [total, setTotal] = useState(0);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const MESSAGES = {\n        ERROR_EMPTYING_CART: 'Failed to clean the items from cart. Please try again later.',\n        CART_IS_EMPTY: 'Your cart is empty.'\n    };\n    useEffect(() => {\n        const totalCost = calculateTotal(cartContents);\n        setTotal(totalCost);\n    }, [cartContents]);\n\n    /**\n     * Calculates the total price of the cart items.\n     * @param {Array} items - The cart items.\n     * @returns {number} - The total price.\n     */\n    const calculateTotal = (items) => {\n        return items.reduce((total, item) => total + item.price, 0);\n    };\n\n    /**\n     * Empties the cart.\n     */\n    const emptyCart = async () => {\n        setLoading(true);\n        try {\n            await useFetchCart.emptyCart();\n            //update cart context\n            fetchCartContents();\n            setTotal(0);\n        } catch (error) {\n            setError(MESSAGES.ERROR_EMPTYING_CART);\n        } finally {\n            setLoading(false);\n        }\n    };\n    /**\n     * Renders the content based on the cart state.\n     * @returns {JSX.Element} - The rendered content.\n     */\n    const renderContent = () => {\n        if (loading) {\n            return <LoadingSpinner />;\n        }\n        if (!cartContents || cartContents.length === 0) {\n            return <h4 className=\"text-center  p-2\">{MESSAGES.CART_IS_EMPTY}</h4>;\n        }\n        return (\n            <>\n                <CartList cartItems={cartContents} />\n                <div className=\"row p-2 m-2\">\n                    <CartFooter total={total} onEmptyCart={emptyCart} />\n                    {error && <p className=\"text-danger p-2\">{error}</p>}\n                </div>\n            </>\n        );\n    };\n\n    return (\n        <div className=\"container\">\n            <h2>My Cart</h2>\n            {renderContent()}\n        </div>\n    );\n}\n\nexport default CartPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}