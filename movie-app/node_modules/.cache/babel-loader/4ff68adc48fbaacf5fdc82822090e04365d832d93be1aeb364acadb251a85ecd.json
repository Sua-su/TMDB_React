{"ast":null,"code":"var _jsxFileName = \"/Users/su/Documents/TMDB_project/movie-app/src/components/review/ReviewList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport ReviewForm from \"./ReviewForm\";\nimport CommentList from \"./CommentList\";\nimport axios from \"axios\";\nimport \"./ReviewList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ReviewList(_ref) {\n  _s();\n  let {\n    reviews,\n    onReviewUpdate\n  } = _ref;\n  const {\n    user\n  } = useContext(AuthContext);\n  const [editingReview, setEditingReview] = useState(null);\n  const [expandedReviews, setExpandedReviews] = useState(new Set());\n  const handleDelete = async reviewId => {\n    if (!window.confirm(\"정말 삭제하시겠습니까?\")) return;\n    try {\n      await axios.delete(`/api/reviews/${reviewId}`, {\n        withCredentials: true\n      });\n      onReviewUpdate();\n    } catch (error) {\n      alert(\"삭제에 실패했습니다\");\n    }\n  };\n  const toggleExpanded = reviewId => {\n    const newExpanded = new Set(expandedReviews);\n    if (newExpanded.has(reviewId)) {\n      newExpanded.delete(reviewId);\n    } else {\n      newExpanded.add(reviewId);\n    }\n    setExpandedReviews(newExpanded);\n  };\n  if (reviews.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-muted\",\n      children: \"\\uC544\\uC9C1 \\uC791\\uC131\\uB41C \\uB9AC\\uBDF0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"review-list\",\n    children: reviews.map(review => {\n      var _review$user, _review$user2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-item\",\n        children: (editingReview === null || editingReview === void 0 ? void 0 : editingReview.id) === review.id ? /*#__PURE__*/_jsxDEV(ReviewForm, {\n          movieId: review.movieId,\n          movieTitle: review.movieTitle,\n          moviePosterPath: review.moviePosterPath,\n          review: review,\n          onSubmit: () => {\n            setEditingReview(null);\n            onReviewUpdate();\n          },\n          onCancel: () => setEditingReview(null)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: ((_review$user = review.user) === null || _review$user === void 0 ? void 0 : _review$user.username) || \"익명\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge bg-warning text-dark ms-2\",\n                children: [\"\\u2B50 \", review.rating, \"/10\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 63,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: new Date(review.createdAt).toLocaleDateString(\"ko-KR\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-content\",\n            children: review.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-actions\",\n            children: [user && user.username === ((_review$user2 = review.user) === null || _review$user2 === void 0 ? void 0 : _review$user2.username) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-primary me-2\",\n                onClick: () => setEditingReview(review),\n                children: \"\\uC218\\uC815\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-outline-danger me-2\",\n                onClick: () => handleDelete(review.id),\n                children: \"\\uC0AD\\uC81C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-sm btn-outline-secondary\",\n              onClick: () => toggleExpanded(review.id),\n              children: expandedReviews.has(review.id) ? \"댓글 숨기기\" : \"댓글 보기\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), expandedReviews.has(review.id) && /*#__PURE__*/_jsxDEV(CommentList, {\n            reviewId: review.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, review.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewList, \"YFEvd9Y+3uJcmPTe+7B7AALVo/Q=\");\n_c = ReviewList;\nexport default ReviewList;\nvar _c;\n$RefreshReg$(_c, \"ReviewList\");","map":{"version":3,"names":["React","useState","useContext","AuthContext","ReviewForm","CommentList","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","ReviewList","_ref","_s","reviews","onReviewUpdate","user","editingReview","setEditingReview","expandedReviews","setExpandedReviews","Set","handleDelete","reviewId","window","confirm","delete","withCredentials","error","alert","toggleExpanded","newExpanded","has","add","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","review","_review$user","_review$user2","id","movieId","movieTitle","moviePosterPath","onSubmit","onCancel","username","rating","Date","createdAt","toLocaleDateString","content","onClick","_c","$RefreshReg$"],"sources":["/Users/su/Documents/TMDB_project/movie-app/src/components/review/ReviewList.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport ReviewForm from \"./ReviewForm\";\nimport CommentList from \"./CommentList\";\nimport axios from \"axios\";\nimport \"./ReviewList.css\";\n\nfunction ReviewList({ reviews, onReviewUpdate }) {\n  const { user } = useContext(AuthContext);\n  const [editingReview, setEditingReview] = useState(null);\n  const [expandedReviews, setExpandedReviews] = useState(new Set());\n\n  const handleDelete = async (reviewId) => {\n    if (!window.confirm(\"정말 삭제하시겠습니까?\")) return;\n\n    try {\n      await axios.delete(`/api/reviews/${reviewId}`, {\n        withCredentials: true,\n      });\n      onReviewUpdate();\n    } catch (error) {\n      alert(\"삭제에 실패했습니다\");\n    }\n  };\n\n  const toggleExpanded = (reviewId) => {\n    const newExpanded = new Set(expandedReviews);\n    if (newExpanded.has(reviewId)) {\n      newExpanded.delete(reviewId);\n    } else {\n      newExpanded.add(reviewId);\n    }\n    setExpandedReviews(newExpanded);\n  };\n\n  if (reviews.length === 0) {\n    return (\n      <div className=\"text-center text-muted\">아직 작성된 리뷰가 없습니다</div>\n    );\n  }\n\n  return (\n    <div className=\"review-list\">\n      {reviews.map((review) => (\n        <div key={review.id} className=\"review-item\">\n          {editingReview?.id === review.id ? (\n            <ReviewForm\n              movieId={review.movieId}\n              movieTitle={review.movieTitle}\n              moviePosterPath={review.moviePosterPath}\n              review={review}\n              onSubmit={() => {\n                setEditingReview(null);\n                onReviewUpdate();\n              }}\n              onCancel={() => setEditingReview(null)}\n            />\n          ) : (\n            <>\n              <div className=\"review-header\">\n                <div>\n                  <strong>{review.user?.username || \"익명\"}</strong>\n                  <span className=\"badge bg-warning text-dark ms-2\">\n                    ⭐ {review.rating}/10\n                  </span>\n                </div>\n                <small className=\"text-muted\">\n                  {new Date(review.createdAt).toLocaleDateString(\"ko-KR\")}\n                </small>\n              </div>\n              <div className=\"review-content\">{review.content}</div>\n              <div className=\"review-actions\">\n                {user && user.username === review.user?.username && (\n                  <>\n                    <button\n                      className=\"btn btn-sm btn-outline-primary me-2\"\n                      onClick={() => setEditingReview(review)}\n                    >\n                      수정\n                    </button>\n                    <button\n                      className=\"btn btn-sm btn-outline-danger me-2\"\n                      onClick={() => handleDelete(review.id)}\n                    >\n                      삭제\n                    </button>\n                  </>\n                )}\n                <button\n                  className=\"btn btn-sm btn-outline-secondary\"\n                  onClick={() => toggleExpanded(review.id)}\n                >\n                  {expandedReviews.has(review.id) ? \"댓글 숨기기\" : \"댓글 보기\"}\n                </button>\n              </div>\n              {expandedReviews.has(review.id) && (\n                <CommentList reviewId={review.id} />\n              )}\n            </>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default ReviewList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}