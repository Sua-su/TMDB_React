{"ast":null,"code":"var _jsxFileName = \"/Users/su/Documents/TMDB_project/movie-app/src/components/review/ReviewForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport \"./ReviewForm.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReviewForm(_ref) {\n  _s();\n  let {\n    movieId,\n    movieTitle,\n    moviePosterPath,\n    review,\n    onSubmit,\n    onCancel\n  } = _ref;\n  const [content, setContent] = useState((review === null || review === void 0 ? void 0 : review.content) || \"\");\n  const [rating, setRating] = useState((review === null || review === void 0 ? void 0 : review.rating) || 5);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const {\n    user\n  } = useContext(AuthContext);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      setError(\"로그인이 필요합니다\");\n      return;\n    }\n    if (content.length < 10) {\n      setError(\"리뷰는 최소 10자 이상 작성해주세요\");\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n    try {\n      const reviewData = {\n        movieId: parseInt(movieId),\n        movieTitle,\n        moviePosterPath,\n        content,\n        rating\n      };\n      if (review) {\n        // Update existing review\n        await axios.put(`/api/reviews/${review.id}`, reviewData, {\n          withCredentials: true\n        });\n      } else {\n        // Create new review\n        await axios.post(\"/api/reviews\", reviewData, {\n          withCredentials: true\n        });\n      }\n      onSubmit();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"리뷰 저장에 실패했습니다\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"review-form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: review ? \"리뷰 수정\" : \"리뷰 작성\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"\\uD3C9\\uC810\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rating-selector\",\n          children: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `rating-btn ${rating >= num ? \"selected\" : \"\"}`,\n            onClick: () => setRating(num),\n            children: num\n          }, num, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-muted\",\n          children: [\"\\uC120\\uD0DD\\uD55C \\uD3C9\\uC810: \", rating, \"/10\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"\\uB9AC\\uBDF0 \\uB0B4\\uC6A9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"form-control\",\n          rows: \"6\",\n          value: content,\n          onChange: e => setContent(e.target.value),\n          placeholder: \"\\uC601\\uD654\\uC5D0 \\uB300\\uD55C \\uC0DD\\uAC01\\uC744 \\uC790\\uC720\\uB86D\\uAC8C \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694 (\\uCD5C\\uC18C 10\\uC790)\",\n          required: true,\n          minLength: \"10\",\n          maxLength: \"2000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-muted\",\n          children: [content.length, \"/2000\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          disabled: loading,\n          children: loading ? \"저장 중...\" : review ? \"수정\" : \"작성\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-secondary\",\n          onClick: onCancel,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewForm, \"PgEGf591FJlLyn2LfQL8sfm+2NI=\");\n_c = ReviewForm;\nexport default ReviewForm;\nvar _c;\n$RefreshReg$(_c, \"ReviewForm\");","map":{"version":3,"names":["React","useState","useContext","axios","AuthContext","jsxDEV","_jsxDEV","ReviewForm","_ref","_s","movieId","movieTitle","moviePosterPath","review","onSubmit","onCancel","content","setContent","rating","setRating","loading","setLoading","error","setError","user","handleSubmit","e","preventDefault","length","reviewData","parseInt","put","id","withCredentials","post","err","_err$response","_err$response$data","response","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","num","type","onClick","rows","value","onChange","target","placeholder","required","minLength","maxLength","disabled","_c","$RefreshReg$"],"sources":["/Users/su/Documents/TMDB_project/movie-app/src/components/review/ReviewForm.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport \"./ReviewForm.css\";\n\nfunction ReviewForm({\n  movieId,\n  movieTitle,\n  moviePosterPath,\n  review,\n  onSubmit,\n  onCancel,\n}) {\n  const [content, setContent] = useState(review?.content || \"\");\n  const [rating, setRating] = useState(review?.rating || 5);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { user } = useContext(AuthContext);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!user) {\n      setError(\"로그인이 필요합니다\");\n      return;\n    }\n\n    if (content.length < 10) {\n      setError(\"리뷰는 최소 10자 이상 작성해주세요\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const reviewData = {\n        movieId: parseInt(movieId),\n        movieTitle,\n        moviePosterPath,\n        content,\n        rating,\n      };\n\n      if (review) {\n        // Update existing review\n        await axios.put(`/api/reviews/${review.id}`, reviewData, {\n          withCredentials: true,\n        });\n      } else {\n        // Create new review\n        await axios.post(\"/api/reviews\", reviewData, {\n          withCredentials: true,\n        });\n      }\n\n      onSubmit();\n    } catch (err) {\n      setError(err.response?.data?.error || \"리뷰 저장에 실패했습니다\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"review-form-container\">\n      <h4>{review ? \"리뷰 수정\" : \"리뷰 작성\"}</h4>\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">평점</label>\n          <div className=\"rating-selector\">\n            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((num) => (\n              <button\n                key={num}\n                type=\"button\"\n                className={`rating-btn ${rating >= num ? \"selected\" : \"\"}`}\n                onClick={() => setRating(num)}\n              >\n                {num}\n              </button>\n            ))}\n          </div>\n          <small className=\"text-muted\">선택한 평점: {rating}/10</small>\n        </div>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">리뷰 내용</label>\n          <textarea\n            className=\"form-control\"\n            rows=\"6\"\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            placeholder=\"영화에 대한 생각을 자유롭게 작성해주세요 (최소 10자)\"\n            required\n            minLength=\"10\"\n            maxLength=\"2000\"\n          />\n          <small className=\"text-muted\">{content.length}/2000</small>\n        </div>\n        <div className=\"d-flex gap-2\">\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n            {loading ? \"저장 중...\" : review ? \"수정\" : \"작성\"}\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={onCancel}\n          >\n            취소\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default ReviewForm;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,wBAAwB;AACpD,OAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,UAAUA,CAAAC,IAAA,EAOhB;EAAAC,EAAA;EAAA,IAPiB;IAClBC,OAAO;IACPC,UAAU;IACVC,eAAe;IACfC,MAAM;IACNC,QAAQ;IACRC;EACF,CAAC,GAAAP,IAAA;EACC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,CAAAY,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,OAAO,KAAI,EAAE,CAAC;EAC7D,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,CAAAY,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEK,MAAM,KAAI,CAAC,CAAC;EACzD,MAAM,CAACE,OAAO,EAAEC,UAAU,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACqB,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM;IAAEuB;EAAK,CAAC,GAAGtB,UAAU,CAACE,WAAW,CAAC;EAExC,MAAMqB,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAI,CAACH,IAAI,EAAE;MACTD,QAAQ,CAAC,YAAY,CAAC;MACtB;IACF;IAEA,IAAIP,OAAO,CAACY,MAAM,GAAG,EAAE,EAAE;MACvBL,QAAQ,CAAC,sBAAsB,CAAC;MAChC;IACF;IAEAF,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF,MAAMM,UAAU,GAAG;QACjBnB,OAAO,EAAEoB,QAAQ,CAACpB,OAAO,CAAC;QAC1BC,UAAU;QACVC,eAAe;QACfI,OAAO;QACPE;MACF,CAAC;MAED,IAAIL,MAAM,EAAE;QACV;QACA,MAAMV,KAAK,CAAC4B,GAAG,CAAE,gBAAelB,MAAM,CAACmB,EAAG,EAAC,EAAEH,UAAU,EAAE;UACvDI,eAAe,EAAE;QACnB,CAAC,CAAC;MACJ,CAAC,MAAM;QACL;QACA,MAAM9B,KAAK,CAAC+B,IAAI,CAAC,cAAc,EAAEL,UAAU,EAAE;UAC3CI,eAAe,EAAE;QACnB,CAAC,CAAC;MACJ;MAEAnB,QAAQ,EAAE;IACZ,CAAC,CAAC,OAAOqB,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACZd,QAAQ,CAAC,EAAAa,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcG,IAAI,cAAAF,kBAAA,uBAAlBA,kBAAA,CAAoBf,KAAK,KAAI,eAAe,CAAC;IACxD,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBACEf,OAAA;IAAKkC,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpCnC,OAAA;MAAAmC,QAAA,EAAK5B,MAAM,GAAG,OAAO,GAAG;IAAO;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAM,EACpCvB,KAAK,iBAAIhB,OAAA;MAAKkC,SAAS,EAAC,oBAAoB;MAAAC,QAAA,EAAEnB;IAAK;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAO,eAC3DvC,OAAA;MAAMQ,QAAQ,EAAEW,YAAa;MAAAgB,QAAA,gBAC3BnC,OAAA;QAAKkC,SAAS,EAAC,MAAM;QAAAC,QAAA,gBACnBnC,OAAA;UAAOkC,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ,eACxCvC,OAAA;UAAKkC,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAC7B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAACK,GAAG,CAAEC,GAAG,iBACvCzC,OAAA;YAEE0C,IAAI,EAAC,QAAQ;YACbR,SAAS,EAAG,cAAatB,MAAM,IAAI6B,GAAG,GAAG,UAAU,GAAG,EAAG,EAAE;YAC3DE,OAAO,EAAEA,CAAA,KAAM9B,SAAS,CAAC4B,GAAG,CAAE;YAAAN,QAAA,EAE7BM;UAAG,GALCA,GAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAOX;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACE,eACNvC,OAAA;UAAOkC,SAAS,EAAC,YAAY;UAAAC,QAAA,GAAC,mCAAQ,EAACvB,MAAM,EAAC,KAAG;QAAA;UAAAwB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACrD,eACNvC,OAAA;QAAKkC,SAAS,EAAC,MAAM;QAAAC,QAAA,gBACnBnC,OAAA;UAAOkC,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ,eAC3CvC,OAAA;UACEkC,SAAS,EAAC,cAAc;UACxBU,IAAI,EAAC,GAAG;UACRC,KAAK,EAAEnC,OAAQ;UACfoC,QAAQ,EAAG1B,CAAC,IAAKT,UAAU,CAACS,CAAC,CAAC2B,MAAM,CAACF,KAAK,CAAE;UAC5CG,WAAW,EAAC,0IAAiC;UAC7CC,QAAQ;UACRC,SAAS,EAAC,IAAI;UACdC,SAAS,EAAC;QAAM;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAChB,eACFvC,OAAA;UAAOkC,SAAS,EAAC,YAAY;UAAAC,QAAA,GAAEzB,OAAO,CAACY,MAAM,EAAC,OAAK;QAAA;UAAAc,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACvD,eACNvC,OAAA;QAAKkC,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BnC,OAAA;UAAQ0C,IAAI,EAAC,QAAQ;UAACR,SAAS,EAAC,iBAAiB;UAACkB,QAAQ,EAAEtC,OAAQ;UAAAqB,QAAA,EACjErB,OAAO,GAAG,SAAS,GAAGP,MAAM,GAAG,IAAI,GAAG;QAAI;UAAA6B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QACpC,eACTvC,OAAA;UACE0C,IAAI,EAAC,QAAQ;UACbR,SAAS,EAAC,mBAAmB;UAC7BS,OAAO,EAAElC,QAAS;UAAA0B,QAAA,EACnB;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAS;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACL;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACD;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACH;AAEV;AAACpC,EAAA,CA7GQF,UAAU;AAAAoD,EAAA,GAAVpD,UAAU;AA+GnB,eAAeA,UAAU;AAAC,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}