{"ast":null,"code":"var _jsxFileName = \"/Users/su/Documents/TMDB_React/movie-app/src/components/review/ReviewForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport \"./ReviewForm.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ReviewForm(_ref) {\n  _s();\n  let {\n    movieId,\n    movieTitle,\n    moviePosterPath,\n    review,\n    onSubmit,\n    onCancel\n  } = _ref;\n  const [content, setContent] = useState((review === null || review === void 0 ? void 0 : review.content) || \"\");\n  const [rating, setRating] = useState((review === null || review === void 0 ? void 0 : review.rating) || 5);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const {\n    user\n  } = useContext(AuthContext);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      setError(\"로그인이 필요합니다\");\n      return;\n    }\n    if (content.length < 10) {\n      setError(\"리뷰는 최소 10자 이상 작성해주세요\");\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n    try {\n      const reviewData = {\n        movieId: parseInt(movieId),\n        movieTitle,\n        moviePosterPath,\n        content,\n        rating\n      };\n      console.log(\"Submitting review:\", reviewData);\n      let response;\n      if (review) {\n        // Update existing review\n        response = await axios.put(`/api/reviews/${review.id}`, reviewData, {\n          withCredentials: true\n        });\n      } else {\n        // Create new review\n        response = await axios.post(\"/api/reviews\", reviewData, {\n          withCredentials: true\n        });\n      }\n      console.log(\"Review saved successfully:\", response.data);\n      alert(review ? \"리뷰가 수정되었습니다\" : \"리뷰가 작성되었습니다\");\n      onSubmit();\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      console.error(\"Error saving review:\", err);\n      const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"리뷰 저장에 실패했습니다\";\n      setError(errorMessage);\n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"review-form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: review ? \"리뷰 수정\" : \"리뷰 작성\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"\\uD3C9\\uC810\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rating-selector\",\n          children: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(num => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: `rating-btn ${rating >= num ? \"selected\" : \"\"}`,\n            onClick: () => setRating(num),\n            children: num\n          }, num, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-muted\",\n          children: [\"\\uC120\\uD0DD\\uD55C \\uD3C9\\uC810: \", rating, \"/10\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"\\uB9AC\\uBDF0 \\uB0B4\\uC6A9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"form-control\",\n          rows: \"6\",\n          value: content,\n          onChange: e => setContent(e.target.value),\n          placeholder: \"\\uC601\\uD654\\uC5D0 \\uB300\\uD55C \\uC0DD\\uAC01\\uC744 \\uC790\\uC720\\uB86D\\uAC8C \\uC791\\uC131\\uD574\\uC8FC\\uC138\\uC694 (\\uCD5C\\uC18C 10\\uC790)\",\n          required: true,\n          minLength: \"10\",\n          maxLength: \"2000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-muted\",\n          children: [content.length, \"/2000\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          disabled: loading,\n          children: loading ? \"저장 중...\" : review ? \"수정\" : \"작성\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-secondary\",\n          onClick: onCancel,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(ReviewForm, \"PgEGf591FJlLyn2LfQL8sfm+2NI=\");\n_c = ReviewForm;\nexport default ReviewForm;\nvar _c;\n$RefreshReg$(_c, \"ReviewForm\");","map":{"version":3,"names":["React","useState","useContext","axios","AuthContext","jsxDEV","_jsxDEV","ReviewForm","_ref","_s","movieId","movieTitle","moviePosterPath","review","onSubmit","onCancel","content","setContent","rating","setRating","loading","setLoading","error","setError","user","handleSubmit","e","preventDefault","length","reviewData","parseInt","console","log","response","put","id","withCredentials","post","data","alert","err","_err$response","_err$response$data","_err$response2","_err$response2$data","errorMessage","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","num","type","onClick","rows","value","onChange","target","placeholder","required","minLength","maxLength","disabled","_c","$RefreshReg$"],"sources":["/Users/su/Documents/TMDB_React/movie-app/src/components/review/ReviewForm.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport \"./ReviewForm.css\";\n\nfunction ReviewForm({\n  movieId,\n  movieTitle,\n  moviePosterPath,\n  review,\n  onSubmit,\n  onCancel,\n}) {\n  const [content, setContent] = useState(review?.content || \"\");\n  const [rating, setRating] = useState(review?.rating || 5);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { user } = useContext(AuthContext);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!user) {\n      setError(\"로그인이 필요합니다\");\n      return;\n    }\n\n    if (content.length < 10) {\n      setError(\"리뷰는 최소 10자 이상 작성해주세요\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n\n    try {\n      const reviewData = {\n        movieId: parseInt(movieId),\n        movieTitle,\n        moviePosterPath,\n        content,\n        rating,\n      };\n\n      console.log(\"Submitting review:\", reviewData);\n\n      let response;\n      if (review) {\n        // Update existing review\n        response = await axios.put(`/api/reviews/${review.id}`, reviewData, {\n          withCredentials: true,\n        });\n      } else {\n        // Create new review\n        response = await axios.post(\"/api/reviews\", reviewData, {\n          withCredentials: true,\n        });\n      }\n\n      console.log(\"Review saved successfully:\", response.data);\n      alert(review ? \"리뷰가 수정되었습니다\" : \"리뷰가 작성되었습니다\");\n      onSubmit();\n    } catch (err) {\n      console.error(\"Error saving review:\", err);\n      const errorMessage = err.response?.data?.error || err.response?.data?.message || \"리뷰 저장에 실패했습니다\";\n      setError(errorMessage);\n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"review-form-container\">\n      <h4>{review ? \"리뷰 수정\" : \"리뷰 작성\"}</h4>\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">평점</label>\n          <div className=\"rating-selector\">\n            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((num) => (\n              <button\n                key={num}\n                type=\"button\"\n                className={`rating-btn ${rating >= num ? \"selected\" : \"\"}`}\n                onClick={() => setRating(num)}\n              >\n                {num}\n              </button>\n            ))}\n          </div>\n          <small className=\"text-muted\">선택한 평점: {rating}/10</small>\n        </div>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">리뷰 내용</label>\n          <textarea\n            className=\"form-control\"\n            rows=\"6\"\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            placeholder=\"영화에 대한 생각을 자유롭게 작성해주세요 (최소 10자)\"\n            required\n            minLength=\"10\"\n            maxLength=\"2000\"\n          />\n          <small className=\"text-muted\">{content.length}/2000</small>\n        </div>\n        <div className=\"d-flex gap-2\">\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n            {loading ? \"저장 중...\" : review ? \"수정\" : \"작성\"}\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={onCancel}\n          >\n            취소\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default ReviewForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}