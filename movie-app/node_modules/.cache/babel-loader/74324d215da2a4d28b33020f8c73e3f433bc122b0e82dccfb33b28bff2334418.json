{"ast":null,"code":"var _jsxFileName = \"/Users/su/Documents/TMDB_project/movie-app/src/components/searchStates/SearchBar.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport HistoryList from './HistoryList';\nimport { useHistory } from \"./HistoryContext\";\n\n/**\n * Component for displaying a search bar and handling search functionality.\n * @param {Object} props - Component props.\n * @param {Function} props.setUrl - Function to set the search URL.\n * @param {string} props.searchUrl - The search URL template.\n * @returns {JSX.Element} - SearchBar component.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SearchBar(_ref) {\n  _s();\n  let {\n    setUrl,\n    searchUrl\n  } = _ref;\n  const {\n    dispatch: historyDispatch\n  } = useHistory();\n  const [inputValue, setInputValue] = useState('');\n  const [showDropdown, setShowDropdown] = useState(false);\n  const inputRef = useRef(null);\n  useEffect(() => {\n    const checkIfClickedOutside = e => {\n      if (showDropdown && inputRef.current && !inputRef.current.contains(e.target)) {\n        setShowDropdown(false);\n      }\n    };\n    document.addEventListener('mousedown', checkIfClickedOutside);\n    return () => {\n      document.removeEventListener('mousedown', checkIfClickedOutside);\n    };\n  }, [showDropdown]);\n\n  /**\n   * Performs the search operation based on the provided name.\n   * @param {string} name - The search query name.\n   */\n  const search = name => {\n    const url = searchUrl.replace('{name}', name);\n    setUrl(url);\n  };\n\n  /**\n   * Handles the form submission event.\n   * Updates the input value, triggers the search, and adds the search query to the history.\n   * @param {Object} event - The form submission event.\n   */\n  const handleSubmit = event => {\n    event.preventDefault();\n    const name = event.target.name.value;\n    historyDispatch({\n      type: 'add',\n      payload: {\n        name\n      }\n    });\n    search(name);\n    setInputValue(name);\n    setShowDropdown(false);\n  };\n\n  /**\n   * Handles the click event on a history item.\n   * Updates the input value, triggers the search, and closes the dropdown.\n   * @param {string} name - The history item name.\n   */\n  const handleHistoryClick = name => {\n    setInputValue(name);\n    search(name);\n    setShowDropdown(false);\n  };\n\n  /**\n   * Handles the click event on the input field.\n   * Shows the dropdown.\n   */\n  const handleInputClick = () => {\n    setShowDropdown(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"p-3 needs-validation\",\n      noValidate: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        ref: inputRef,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          className: \"form-control\",\n          placeholder: \"\\uAC80\\uC0C9...\",\n          required: true,\n          value: inputValue,\n          onClick: handleInputClick,\n          onChange: event => setInputValue(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-light rounded-right\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-search rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), showDropdown && /*#__PURE__*/_jsxDEV(HistoryList, {\n          handleHistoryClick: handleHistoryClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchBar, \"CAeLRawe8a1JM+F1kPYkVNKTHgs=\", false, function () {\n  return [useHistory];\n});\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["React","useState","useRef","useEffect","HistoryList","useHistory","jsxDEV","_jsxDEV","SearchBar","_ref","_s","setUrl","searchUrl","dispatch","historyDispatch","inputValue","setInputValue","showDropdown","setShowDropdown","inputRef","checkIfClickedOutside","e","current","contains","target","document","addEventListener","removeEventListener","search","name","url","replace","handleSubmit","event","preventDefault","value","type","payload","handleHistoryClick","handleInputClick","className","children","onSubmit","noValidate","ref","placeholder","required","onClick","onChange","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/su/Documents/TMDB_project/movie-app/src/components/searchStates/SearchBar.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport HistoryList from './HistoryList';\nimport {useHistory} from \"./HistoryContext\";\n\n/**\n * Component for displaying a search bar and handling search functionality.\n * @param {Object} props - Component props.\n * @param {Function} props.setUrl - Function to set the search URL.\n * @param {string} props.searchUrl - The search URL template.\n * @returns {JSX.Element} - SearchBar component.\n */\nfunction SearchBar({ setUrl, searchUrl }) {\n    const { dispatch: historyDispatch } = useHistory();\n    const [inputValue, setInputValue] = useState('');\n    const [showDropdown, setShowDropdown] = useState(false);\n    const inputRef = useRef(null);\n\n    useEffect(() => {\n        const checkIfClickedOutside = (e) => {\n            if (showDropdown && inputRef.current && !inputRef.current.contains(e.target)) {\n                setShowDropdown(false);\n            }\n        };\n\n        document.addEventListener('mousedown', checkIfClickedOutside);\n\n        return () => {\n            document.removeEventListener('mousedown', checkIfClickedOutside);\n        };\n    }, [showDropdown]);\n\n    /**\n     * Performs the search operation based on the provided name.\n     * @param {string} name - The search query name.\n     */\n    const search = (name) => {\n        const url = searchUrl.replace('{name}', name);\n        setUrl(url);\n    };\n\n    /**\n     * Handles the form submission event.\n     * Updates the input value, triggers the search, and adds the search query to the history.\n     * @param {Object} event - The form submission event.\n     */\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        const name = event.target.name.value;\n        historyDispatch({ type: 'add', payload: { name } });\n        search(name);\n        setInputValue(name);\n        setShowDropdown(false);\n    };\n\n    /**\n     * Handles the click event on a history item.\n     * Updates the input value, triggers the search, and closes the dropdown.\n     * @param {string} name - The history item name.\n     */\n    const handleHistoryClick = (name) => {\n        setInputValue(name);\n        search(name);\n        setShowDropdown(false);\n    };\n\n    /**\n     * Handles the click event on the input field.\n     * Shows the dropdown.\n     */\n    const handleInputClick = () => {\n        setShowDropdown(true);\n    };\n\n    return (\n        <div className=\"d-flex justify-content-center align-items-center\">\n            <form onSubmit={handleSubmit} className=\"p-3 needs-validation\" noValidate>\n                <div className=\"input-group\" ref={inputRef}>\n                    <input\n                        type=\"text\"\n                        name=\"name\"\n                        className=\"form-control\"\n                        placeholder=\"검색...\"\n                        required\n                        value={inputValue}\n                        onClick={handleInputClick}\n                        onChange={(event) => setInputValue(event.target.value)}\n                    />\n                    <button type=\"submit\" className=\"btn btn-light rounded-right\">\n                        <i className=\"bi bi-search rounded\"></i>\n                    </button>\n                    {showDropdown && <HistoryList handleHistoryClick={handleHistoryClick} />}\n                </div>\n            </form>\n        </div>\n    );\n}\n\nexport default SearchBar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}