{"ast":null,"code":"var _jsxFileName = \"/Users/su/Documents/TMDB_project/movie-app/src/components/searchStates/MovieStatusInCart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport * as useFetchCart from '../cart/useFetchCart';\nimport '../../css/MovieStatusInCart.css';\nimport LoadingSpinner from '../home/LoadingSpinner';\nimport { CartContext } from \"../context/CartContext\";\n\n/**\n * Component to display the status of a movie in the cart and handle adding it to the cart.\n * @param {Object} props - Component props.\n * @param {Object} props.movie - The movie object.\n * @returns {JSX.Element} - MovieStatusInCart component.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MovieStatusInCart(_ref) {\n  _s();\n  let {\n    movie\n  } = _ref;\n  const STATUS_MESSAGES = {\n    ALREADY_IN_CART: 'Movie already in cart',\n    ERROR_CHECKING_STATUS: 'Error checking movie status',\n    ERROR_ADDING_TO_CART: 'Error adding movie to cart.',\n    MOVIE_ADDED: 'Movie added',\n    ADD_TO_CARD: 'Add to cart'\n  };\n  const {\n    cartContents,\n    fetchCartContents\n  } = useContext(CartContext);\n  const [isInCart, setIsInCart] = useState(false);\n  const [status, setStatus] = useState(STATUS_MESSAGES.ADD_TO_CARD);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const movieIsInCart = cartContents.some(content => content.id === movie.id);\n    setIsInCart(movieIsInCart);\n    if (movieIsInCart) {\n      setStatus(STATUS_MESSAGES.ALREADY_IN_CART);\n    }\n  }, [movie, cartContents]);\n  const handleAddToCart = async () => {\n    try {\n      console.log(movie);\n      setLoading(true);\n      await useFetchCart.addToCart(movie);\n      fetchCartContents();\n      setStatus(STATUS_MESSAGES.MOVIE_ADDED);\n      setIsInCart(true);\n    } catch (error) {\n      setStatus(STATUS_MESSAGES.ERROR_ADDING_TO_CART);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading ? /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"add-to-cart-btn\",\n      onClick: handleAddToCart,\n      disabled: isInCart,\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(MovieStatusInCart, \"eEIQjmF7DRX4T7JIeblj++DzQrg=\");\n_c = MovieStatusInCart;\nexport default MovieStatusInCart;\nvar _c;\n$RefreshReg$(_c, \"MovieStatusInCart\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useFetchCart","LoadingSpinner","CartContext","jsxDEV","_jsxDEV","MovieStatusInCart","_ref","_s","movie","STATUS_MESSAGES","ALREADY_IN_CART","ERROR_CHECKING_STATUS","ERROR_ADDING_TO_CART","MOVIE_ADDED","ADD_TO_CARD","cartContents","fetchCartContents","isInCart","setIsInCart","status","setStatus","loading","setLoading","movieIsInCart","some","content","id","handleAddToCart","console","log","addToCart","error","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/su/Documents/TMDB_project/movie-app/src/components/searchStates/MovieStatusInCart.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport * as useFetchCart from '../cart/useFetchCart';\nimport '../../css/MovieStatusInCart.css';\nimport LoadingSpinner from '../home/LoadingSpinner';\nimport {CartContext} from \"../context/CartContext\";\n\n\n/**\n * Component to display the status of a movie in the cart and handle adding it to the cart.\n * @param {Object} props - Component props.\n * @param {Object} props.movie - The movie object.\n * @returns {JSX.Element} - MovieStatusInCart component.\n */\nfunction MovieStatusInCart({ movie }) {\n    const STATUS_MESSAGES = {\n        ALREADY_IN_CART: 'Movie already in cart',\n        ERROR_CHECKING_STATUS: 'Error checking movie status',\n        ERROR_ADDING_TO_CART: 'Error adding movie to cart.',\n        MOVIE_ADDED: 'Movie added',\n        ADD_TO_CARD: 'Add to cart',\n    };\n\n    const { cartContents, fetchCartContents } = useContext(CartContext);\n    const [isInCart, setIsInCart] = useState(false);\n    const [status, setStatus] = useState(STATUS_MESSAGES.ADD_TO_CARD);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        const movieIsInCart = cartContents.some(content => content.id === movie.id);\n        setIsInCart(movieIsInCart);\n\n        if (movieIsInCart) {\n            setStatus(STATUS_MESSAGES.ALREADY_IN_CART);\n        }\n    }, [movie, cartContents]);\n\n    const handleAddToCart = async () => {\n        try {\n            console.log(movie)\n            setLoading(true);\n            await useFetchCart.addToCart(movie);\n            fetchCartContents();\n            setStatus(STATUS_MESSAGES.MOVIE_ADDED);\n            setIsInCart(true);\n\n        } catch (error) {\n            setStatus(STATUS_MESSAGES.ERROR_ADDING_TO_CART);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div>\n            {loading ? (\n                <LoadingSpinner />\n            ) : (\n                    <button className=\"add-to-cart-btn\" onClick={handleAddToCart} disabled={isInCart}>\n                        {status}\n                    </button>\n                  )}\n        </div>\n    );\n}\n\nexport default MovieStatusInCart;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,OAAO,KAAKC,YAAY,MAAM,sBAAsB;AACpD,OAAO,iCAAiC;AACxC,OAAOC,cAAc,MAAM,wBAAwB;AACnD,SAAQC,WAAW,QAAO,wBAAwB;;AAGlD;AACA;AACA;AACA;AACA;AACA;AALA,SAAAC,MAAA,IAAAC,OAAA;AAMA,SAASC,iBAAiBA,CAAAC,IAAA,EAAY;EAAAC,EAAA;EAAA,IAAX;IAAEC;EAAM,CAAC,GAAAF,IAAA;EAChC,MAAMG,eAAe,GAAG;IACpBC,eAAe,EAAE,uBAAuB;IACxCC,qBAAqB,EAAE,6BAA6B;IACpDC,oBAAoB,EAAE,6BAA6B;IACnDC,WAAW,EAAE,aAAa;IAC1BC,WAAW,EAAE;EACjB,CAAC;EAED,MAAM;IAAEC,YAAY;IAAEC;EAAkB,CAAC,GAAGjB,UAAU,CAACG,WAAW,CAAC;EACnE,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACsB,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAACY,eAAe,CAACK,WAAW,CAAC;EACjE,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAE7CC,SAAS,CAAC,MAAM;IACZ,MAAMyB,aAAa,GAAGR,YAAY,CAACS,IAAI,CAACC,OAAO,IAAIA,OAAO,CAACC,EAAE,KAAKlB,KAAK,CAACkB,EAAE,CAAC;IAC3ER,WAAW,CAACK,aAAa,CAAC;IAE1B,IAAIA,aAAa,EAAE;MACfH,SAAS,CAACX,eAAe,CAACC,eAAe,CAAC;IAC9C;EACJ,CAAC,EAAE,CAACF,KAAK,EAAEO,YAAY,CAAC,CAAC;EAEzB,MAAMY,eAAe,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACAC,OAAO,CAACC,GAAG,CAACrB,KAAK,CAAC;MAClBc,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMtB,YAAY,CAAC8B,SAAS,CAACtB,KAAK,CAAC;MACnCQ,iBAAiB,EAAE;MACnBI,SAAS,CAACX,eAAe,CAACI,WAAW,CAAC;MACtCK,WAAW,CAAC,IAAI,CAAC;IAErB,CAAC,CAAC,OAAOa,KAAK,EAAE;MACZX,SAAS,CAACX,eAAe,CAACG,oBAAoB,CAAC;IACnD,CAAC,SAAS;MACNU,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,oBACIlB,OAAA;IAAA4B,QAAA,EACKX,OAAO,gBACJjB,OAAA,CAACH,cAAc;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG,gBAEdhC,OAAA;MAAQiC,SAAS,EAAC,iBAAiB;MAACC,OAAO,EAAEX,eAAgB;MAACY,QAAQ,EAAEtB,QAAS;MAAAe,QAAA,EAC5Eb;IAAM;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAEZ;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACL;AAEd;AAAC7B,EAAA,CAlDQF,iBAAiB;AAAAmC,EAAA,GAAjBnC,iBAAiB;AAoD1B,eAAeA,iBAAiB;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}